// http://mrhaki.blogspot.com/2010/10/gradle-goodness-copy-files-with.html
//import org.apache.tools.ant.filters.*

buildscript {
    repositories {
        jcenter()
    }
 
    dependencies {
        classpath 'org.asciidoctor:asciidoctor-gradle-plugin:1.5.3'
    }
}

project.ext {
	gradleVersion = '4.0'
} 

 
// Plugin so we can render AsciiDoc documents.
apply plugin: 'org.asciidoctor.gradle.asciidoctor'

defaultTasks 'filterCopy','asciidoctor'

asciidoctor {
    // We can change the AsciidoctorJ
    // dependency version.
    version = '1.5.3'
    separateOutputDirs=false
    //sourceDir=file(new File('../src/docs/asciidoc'))
}
 

task('filterCopy', type: Copy) {
    from 'templates'
    into 'src/docs/asciidoc'
    include '**/*.txt'
    expand ([gradleVersion:gradleVersion])
    rename { it - '.txt' + '.adoc'}
}
