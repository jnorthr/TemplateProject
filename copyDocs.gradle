// http://mrhaki.blogspot.com/2010/10/gradle-goodness-copy-files-with.html
//import org.apache.tools.ant.filters.*

buildscript {
    repositories {
        jcenter()
    }
 
    dependencies {
        classpath 'org.asciidoctor:asciidoctor-gradle-plugin:1.5.3'
    }
}

project.ext {
	gradleVersion = '4.0'
} 

 
// Plugin so we can render AsciiDoc documents.
apply plugin: 'org.asciidoctor.gradle.asciidoctor'

defaultTasks 'filterCopy','asciidoctor', 'resources'

asciidoctor {
    // We can change the AsciidoctorJ dependency version.
    version = '1.5.3'
    separateOutputDirs=false
    outputDir = new File('../src/docs/asciidoc')
    sourceDir=file('../src/docs/asciidoc')
    backends('html5')
}
 

task('filterCopy', type: Copy) {
    from 'templates'
    into file('../src/docs/asciidoc')
    include '**/*.txt'
    expand ([gradleVersion:gradleVersion])
    rename { it - '.txt' + '.adoc'}
}

task ('resources', type: Copy) {
  // now take properties from folders
  from 'resources'
  include '*.properties'
  into file('../src/main/resources')
}
